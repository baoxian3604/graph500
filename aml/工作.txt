由于buffer要进行交换，为了保证线程在buffer交换过程中正确获取buffer长度，将buffer的长度（或者说待写入长度）绑定到buffer首部。
同时为了发送方正确知道buffer是否写入完成，需要在buffer首部添加已写入长度

发送：获取待写入地址(->缓冲区已满->交换buffer->等待剩余线程写入完成->发送)->写入buffer

全加：线程间全加->不同进程主线程进行进程间全加->线程同步->取出全加和->由最后返回的线程清零全加和

同步：线程间同步->由最后进入的线程执行aml_barrier;

